# Домашнее задание к занятию «Базы данных, их типы» - `Чеботников М.Б.`

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

#### Решение:

Реляционная СУБД, из бесплатных PostgreSQL или Oracle Database, если платный вариант то SQL.

1. Требуется строгая схема данных.
2. Поддержка ACID-транзакций (целостности финансовых данных).
3. Возможность построения сложных JOIN для аналитики и отчётности (легко работать с иерархиями и кросс-таблицами, можно соединять строки из разных таблиц).
4. Поддержка оконных функций, индексов — для эффективного прогнозирования и анализа.



1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

#### Решение:

1. Использовать аппаратно ускоренное хеширование через OpenSSL EVP API.
2. Внешние сервисы хеширования/кеширования: Redis (для кеширования хешей). 
3. Если хеширование происходит в рамках БД — использовать генерируемые столбцы с индексами.


1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

#### Решение:

1. Для лендингов: Документоориентированная СУБД (как пример MongoDB) — гибкая схема, быстрая вставка лидов. Но подойдет и реляционная СУБД.
2. Для CRM: тоже может использовать MongoDB или PostgreSQL с JSONB-полями. 


1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

#### Решение:

Можно, PostgreSQL с использованием:
1. Реляционных таблиц для структурированных данных.
2. JSONB-столбцов для гибких данных (формы с разными полями на разных лендингах).
3. Механизмов партиционирования и индексов (GIN, BRIN) для масштабируемости.


1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

#### Решение:

СУБД: Иерархическая или документоориентированная (раздел → подраздел → документ). Простые запросы, низкая нагрузка.


1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

#### Решение:

Да, можно использовать тот же PostgreSQL, выделить отдельную схему и роли.


1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

#### Решение:

Графовая СУБД

1. Работа с связями: склад → объект → курьер → документ → получатель.
2. Алгоритмы поиска кратчайшего пути встроены и оптимизированы.
3. Мгновенное обновление маршрутов при изменении условий.
4. Высокая скорость обхода связей по сравнению с JOIN в реляционных БД.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

#### Решение:

Да наверняка можно все сделать в реляционной СУБД, вопрос насколько это будет удобно конечному пользователю и скорость работы всего этого.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

#### Решение:

1. Соединения с БД Банка;
2. Запрос к лицевому счету и проверка денежных средств;
3. Блокировка денежных средств;
4. Соединения с БД сотовой связи;
5. Зачисление денежных средств, которую мы блокировали в 3м пункте;
6. Информацуия об изменения (COMMIT). Закрытие соединения.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

#### Решение:

Да в целом такие же этапы, но добавилось бы фоновое задание - запуск раз в событие (дата и время). Ну и пару проверок: платеж зачислен ? - ДА. платеж зачислен ? - НЕТ -> Какое-то количество попыток в надежде, что средства появятся.


---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

#### Решение:

1.	Строгая целостность данных даже при сбоях.
2.	Стандартизированный язык запросов (SQL).
3.	Защита от некорректных данных на уровне СУБД (CHECK, UNIQUE, NOT NULL).
4.	Производительность за счет кэширование при больших объемах БД.
5.	Богатые возможности JOIN-запросов


3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

#### Решение:

Ну судя по информации из интернета...
NewSQL - слияние преимуществ SQL-бд с инновациями, направленными на решение проблем масштабируемости и производительности. 
То преимущество очевидно.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

#### Решение:

Масштабируемость, отказоустойчивость, доступность, производительность, балансировка нагрузки...
После серфинга по интернету в голову приходит только MapReduce. При работе с огромный количество данных я бы рассмотрел модель Apache Spark, наследник MapReduce, что упоминалась в лекции. Apache Spark хранит промежуточные данные в оперативной памяти, что сильно ускоряет работу.

1.	Универсальность и богатый набор библиотек: Spark SQL, MLlib, Structured Streaming, GraphX.
2. Spark идеально масштабируется на кластеры в тысячи узлов.
3. Удобство разработки: Spark предоставляет API на Java, Scala, Python (PySpark) и R, что делает его доступным для широкого круга разработчиков. Модель программирования является декларативной и высокоуровневой, что упрощает написание сложных пайплайнов обработки данных.

---


